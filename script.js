const charMap = {
  '–∞':1,'–±':2,'–≤':3,'–≥':4,'–¥':5,'–µ':6,'—ë':7,'–∂':8,'–∑':9,
  '–∏':1,'–π':2,'–∫':3,'–ª':4,'–º':5,'–Ω':6,'–æ':7,'”©':8,'–ø':9,
  '—Ä':1,'—Å':2,'—Ç':3,'—É':4,'“Ø':5,'—Ñ':6,'—Ö':7,'—Ü':8,'—á':9,
  '—à':1,'—â':2,'—ä':3,'—ã':4,'—å':5,'—ç':6,'—é':7,'—è':8,
  'a':1,'b':2,'c':3,'d':4,'e':5,'f':6,'g':7,'h':8,'i':9,
  'j':1,'k':2,'l':3,'m':4,'n':5,'o':6,'p':7,'q':8,'r':9,
  's':1,'t':2,'u':3,'v':4,'w':5,'x':6,'y':7,'z':8
};

const lifePaths = {
  1: "–¢–∞ —É–¥–∏—Ä–¥–∞–≥—á. –ë–∏–µ –¥–∞–∞—Å–∞–Ω, —Å–∞–Ω–∞–∞—á–ª–∞–≥–∞—Ç–∞–π, —ç—Ä–º—ç–ª–∑—ç–ª—Ç—ç–π.",
  2: "–≠–≤ –∑–æ—Ö–∏—Ü–æ–ª, —É—è–Ω –∑”©”©–ª”©–Ω, –Ω–∞–π—Ä—Å–∞–≥ —Ö–∞—Ä–∏–ª—Ü–∞–∞ —ç—Ä—Ö—ç–º–ª—ç–¥—ç–≥.",
  3: "–ë“Ø—Ç—ç—ç–ª—á, —Ö”©–≥–∂–∏–ª—Ç—ç–π, —Å—ç—Ç–≥—ç–ª —Ö”©–¥–ª”©–ª –∏—Ö—Ç—ç–π.",
  4: "–•–∞—Ä–∏—É—Ü–ª–∞–≥–∞—Ç–∞–π, —Ç–æ–≥—Ç–≤–æ—Ä—Ç–æ–π, —É–π–≥–∞–≥“Ø–π —Ö”©–¥”©–ª–º”©—Ä—á.",
  5: "–ê–¥–∞–ª —è–≤–¥–∞–ª–¥ –¥—É—Ä—Ç–∞–π, —ç—Ä—Ö —á”©–ª”©”©–≥ —ç—Ä—Ö—ç–º–ª—ç–¥—ç–≥.",
  6: "–•–∞–ª–∞–º–∂—Ç–∞–π, –≥—ç—Ä –±“Ø–ª—Å—ç–≥, —ç–Ω—ç—Ä—ç–Ω–≥“Ø–π —Å—ç—Ç–≥—ç–ª—Ç—ç–π.",
  7: "–ë—è—Å–∞–ª–≥–∞–ª–¥ –¥—É—Ä—Ç–∞–π, –≥“Ø–Ω —É—Ö–∞–∞–Ω —Å–æ–Ω–∏—Ä—Ö–¥–æ–≥.",
  8: "–ë–∏–∑–Ω–µ—Å —Å—ç—Ç–≥—ç–ª–≥—ç—ç—Ç—ç–π, —Ö”©—Ä”©–Ω–≥”© –º”©–Ω–≥”©–Ω–∏–π –º—ç–¥—Ä—ç–º–∂—Ç—ç–π.",
  9: "–ë—É—Å–¥–∞–¥ —Ç—É—Å–ª–∞—Ö —Å—ç—Ç–≥—ç–ª—Ç—ç–π, —Ö“Ø–º“Ø“Ø–Ω–ª—ç–≥–∏–π–Ω —á–∏–≥ —Ö–∞–Ω–¥–ª–∞–≥–∞—Ç–∞–π.",
  11: "–ó”©–Ω —Å–æ–≤–∏–Ω ”©–Ω–¥”©—Ä, —Å“Ø–Ω—Å–ª—ç–≥ —É–¥–∏—Ä–¥–∞–≥—á.",
  22: "–ê–≥—É—É –±“Ø—Ç—ç—ç–≥—á, –¥—ç–ª—Ö–∏–π–Ω —Ö—ç–º–∂—ç—ç–Ω–∏–π –Ω”©–ª”©”© “Ø–∑“Ø“Ø–ª—ç–≥—á.",
  33: "”®—Ä—à”©”©–Ω–≥“Ø–π —Å—ç—Ç–≥—ç–ª, –Ω–∏–π–≥—ç–º–¥ –∑“Ø—Ç–≥—ç–≥—á —Ö—É–≤—å —Ö“Ø–Ω."
};

const destinyNumbers = {
  1: "–¢–∞ —Ç”©—Ä”©–ª—Ö–∏–π–Ω —É–¥–∏—Ä–¥–∞–≥—á –±”©–≥”©”©–¥ –∞–º–∂–∏–ª—Ç–∞–Ω–¥ —Ö“Ø—Ä—ç—Ö —ç—Ä–º—ç–ª–∑—ç–ª—Ç—ç–π. –ë–∏–µ –¥–∞–∞—Å–∞–Ω, –∑–æ—Ä–∏–≥—Ç–æ–π, –±“Ø—Ç—ç—ç–ª—á, ”©”©—Ä–∏–π–Ω –≥—ç—Å—ç–Ω “Ø–∑—ç–ª –±–æ–¥–æ–ª—Ç–æ–π. –ê–º–∂–∏–ª—Ç–∞–Ω–¥ —Ö“Ø—Ä—ç—Ö–∏–π–Ω —Ç—É–ª–¥ ”©”©—Ä—Ç”©”© –∏—Ç–≥—ç—Ö –∏—Ç–≥—ç–ª –±–æ–ª–æ–Ω —Ç—ç—Å–≤—ç—Ä —Ç—ç–≤—á—ç—ç—Ä —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π.",
  2: "–¢–∞ –¥–∏–ø–ª–æ–º–∞—Ç, —ç–≤ –∑“Ø–π–≥ —ç—Ä—Ö—ç–º–ª—ç–≥—á, –±—É—Å–∞–¥—Ç–∞–π —Ö–∞–º—Ç—Ä–∞–Ω –∞–∂–∏–ª–ª–∞—Ö–∞–¥ –∞–≤—å—è–∞—Å—Ç–∞–π. –ó”©”©–ª”©–Ω, —Ö–∞–ª–∞–º–∂—Ç–∞–π –∑–∞–Ω —á–∞–Ω–∞—Ä —Ç–∞–Ω—å —Ö“Ø–º“Ø“Ø—Å–∏–π–≥ —Ç–∞—Ç–¥–∞–≥. –ì—ç–≤—á —Ö—ç—Ç –º—ç–¥—Ä—ç–º—Ç–≥–∏–π –±–∞–π—Ö–∞–∞—Å –∑–∞–π–ª—Å—Ö–∏–π—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π.",
  3: "–¢–∞ –∏–ª—ç—Ä—Ö–∏–π–ª—ç—Ö —á–∞–¥–≤–∞—Ä ”©–Ω–¥”©—Ä—Ç—ç–π, –±“Ø—Ç—ç—ç–ª—á —Å—ç—Ç–≥—ç–ª–≥—ç—ç—Ç—ç–π. –£—Ä–ª–∞–≥, —É—Ä–∞–Ω –∏–ª—Ç–≥—ç–ª, –∑–æ—Ö–∏–æ–ª, —Ö”©–≥–∂–∏–º –∑—ç—Ä—ç–≥ –∞–≤—å—è–∞—Å—Ç–∞–π. –•—ç—Ç –∏—Ö —Ç–∞—Ä—Ö–∞–π –±—É—Ç–∞—Ä—Ö–∞–π –±–∞–π–¥–ª—ã–≥ —Ö—è–∑–≥–∞–∞—Ä–ª–∞–∂, —Ç”©–≤–ª”©—Ä”©—Ö –Ω—å —á—É—Ö–∞–ª.",
  4: "–¢–∞ —Ö”©–¥”©–ª–º”©—Ä—á, —Ç–æ–≥—Ç–≤–æ—Ä—Ç–æ–π, –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π –Ω—ç–≥—ç–Ω. –ù–∞—Ä–∏–π–Ω —Ç”©–ª”©–≤–ª”©–ª—Ç—Ç—ç–π, –∑–∞—Ä—á–∏–º—á, –±–∞–π–≥—É—É–ª–ª–∞–≥—ã–Ω –∞–∂–∏–ª–¥ –∞–≤—å—è–∞—Å—Ç–∞–π. –•—ç—Ç—ç—Ä—Ö–∏–π —Ö–∞—Ç—É—É –±–∞–π—Ä —Å—É—É—Ä—å –±–∞—Ä–∏–º—Ç–ª–∞—Ö–≥“Ø–π –±–∞–π—Ö –Ω—å –∑–æ—Ö–∏—Å—Ç–æ–π.",
  5: "–¢–∞ —ç—Ä—Ö —á”©–ª”©”©–≥ —ç—Ä—Ö—ç–º–ª—ç–¥—ç–≥, –∞–¥–∞–ª —è–≤–¥–∞–ª–¥ –¥—É—Ä—Ç–∞–π, –æ–ª–æ–Ω —Ç–∞–ª—ã–Ω —Å–æ–Ω–∏—Ä—Ö–æ–ª—Ç–æ–π. –ì—ç–Ω—ç—Ç–∏–π–Ω ”©”©—Ä—á–ª”©–ª—Ç”©–¥ —Ö—É—Ä–¥–∞–Ω –¥–∞—Å–∞–Ω –∑–æ—Ö–∏—Ü–¥–æ–≥. –ì—ç–≤—á —Ö—ç—Ç —Ö”©–Ω–≥”©–Ω —Ö–∏–π—Å–≤—ç—Ä –±–∞–π–¥–∞–ª, –∞–Ω—Ö–∞–∞—Ä–ª–∞–∞ —Å–∞—Ä–Ω–∏—É–ª–∞—Ö —ç—Ä—Å–¥—ç–ª—Ç—ç–π.",
  6: "–¢–∞ —Ö–∞–ª–∞–º–∂—Ç–∞–π, –≥—ç—Ä –±“Ø–ª—Å—ç–≥, –±—É—Å–¥–∞–¥ —Ç—É—Å–ª–∞—Ö —Å—ç—Ç–≥—ç–ª—Ç—ç–π. –•–∞—Ä–∏—É—Ü–ª–∞–≥–∞—Ç–∞–π, —à—É–¥–∞—Ä–≥–∞, –Ω–∏–π–≥–º–∏–π–Ω —Å–∞–π–Ω —Å–∞–π—Ö–Ω—ã —Ç”©–ª”©”© –∑“Ø—Ç–≥—ç–¥—ç–≥. –•—ç—Ç –∏—Ö –∑–æ–ª–∏–æ—Å –≥–∞—Ä–≥–∞—Ö, –±—É—Å–¥–∞–¥ —Ö—ç—Ç –∏—Ö –∞–Ω—Ö–∞–∞—Ä–∞–ª —Ç–∞–≤–∏—Ö –Ω—å ”©”©—Ä–∏–π–≥”©”© —Ö–æ–π—à —Ç–∞–≤–∏—Ö–∞–¥ —Ö“Ø—Ä–≥—ç–∂ –±–æ–ª–∑–æ—à–≥“Ø–π.",
  7: "–¢–∞ –≥“Ø–Ω –±–æ–¥–æ–ª—Ç–æ–π, —Å—É–¥–∞–ª–≥–∞–∞–Ω–¥ –¥—É—Ä—Ç–∞–π, –¥–æ—Ç–æ–æ–¥ –µ—Ä—Ç”©–Ω—Ü –±–∞—è–ª–∞–≥. –°“Ø–Ω—Å–ª—ç–≥ –±–æ–ª–æ–Ω –æ—é—É–Ω—ã —Ö”©–≥–∂–ª–∏–π–≥ —ç—Ä—Ö—ç–º–ª—ç–¥—ç–≥. –ì—ç–≤—á —Ö—ç—Ç –¥–æ—Ç–æ–≥—à–æ–æ –±–∞–π–¥–∞–ª, –≥–∞–Ω—Ü–∞–∞—Ä–¥–∞–ª–¥ –∞–≤—Ç–∞—Ö —ç—Ä—Å–¥—ç–ª—Ç—ç–π.",
  8: "–¢–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–ª–∞–≥ –∞–º–∂–∏–ª—Ç, —É–¥–∏—Ä–¥–∞–Ω –∑–æ—Ö–∏–æ–Ω –±–∞–π–≥—É—É–ª–∞—Ö —á–∞–¥–≤–∞—Ä—Ç–∞–π. –°–∞–Ω—Ö“Ø“Ø–≥–∏–π–Ω —Ö—É–≤—å–¥ –º—ç–¥—Ä—ç–º–∂—Ç—ç–π, –±–∏–∑–Ω–µ—Å–∏–π–Ω –∞–≤—å—è–∞—Å—Ç–∞–π. –ì—ç—Ö–¥—ç—ç –º”©–Ω–≥”©, —ç—Ä—Ö –º—ç–¥–ª–∏–π–≥ —Ö—ç—Ç —à“Ø—Ç—ç—Ö –Ω—å –±–∞–ª–∞–Ω—Å–∞–∞ –∞–ª–¥–∞—Ö–∞–¥ —Ö“Ø—Ä–≥—ç–∂ –±–æ–ª–∑–æ—à–≥“Ø–π.",
  9: "–¢–∞ ”©–≥–ª”©–≥—á, ”©—Ä—à”©”©–Ω–≥“Ø–π, —Ö“Ø–º“Ø“Ø–Ω–ª—ç–≥ “Ø–∑—ç–ª—Ç—ç–π. ”®”©—Ä–∏–π–≥”©”© –±—É—Å–¥—ã–Ω —Ç”©–ª”©”© –∑–æ—Ä–∏—É–ª–∞—Ö —Ö–∞–Ω–¥–ª–∞–≥–∞—Ç–∞–π. –£—Ä–∞–Ω —Å—ç—Ç–≥—ç–º–∂—Ç—ç–π, —É—Ä–ª–∞–≥—Ç –∞–≤—å—è–∞—Å—Ç–∞–π. –•–∞—Ä–∏–Ω —Ö—ç—Ç –º—ç–¥—Ä—ç–º—Ç–≥–∏–π –∑–∞–Ω –Ω—å —à–∞–Ω–∞–ª–∞–ª–¥ —Ö“Ø—Ä–≥—ç–∂ –±–æ–ª–æ—Ö —Ç—É–ª —Å—ç—Ç–≥—ç–ª—ç—ç —Ç–æ–≥—Ç–≤–æ—Ä—Ç–æ–π –±–∞–π–ª–≥–∞—Ö–∞–¥ –∞–Ω—Ö–∞–∞—Ä–∞–∞—Ä–∞–π.",
  11: "–ú–∞—Å—Ç–µ—Ä —Ç–æ–æ 11 –Ω—å –∑”©–Ω —Å–æ–≤–∏–Ω, –≥—ç–≥—ç—ç—Ä—ç–ª, –¥–æ—Ç–æ–æ–¥ –≥“Ø–Ω –º—ç–¥—Ä—ç–º–∂–∏–π–≥ –∏–ª—ç—Ä—Ö–∏–π–ª–¥—ç–≥. –¢–∞ –∑”©–Ω —Å–æ–≤–∏–Ω ”©–Ω–¥”©—Ä—Ç—ç–π, –±—É—Å–¥—ã–Ω –∑–∞–º—ã–≥ –≥—ç—Ä—ç–ª—Ç“Ø“Ø–ª—ç–≥—á –±–∞–π–∂ —á–∞–¥–Ω–∞. –•—ç—Ä—ç–≤ —Å—ç—Ç–≥—ç–ª–∏–π–Ω –∞–º–∞—Ä –∞–º–≥–∞–ª–∞–Ω–≥ –æ–ª–∂ —á–∞–¥–≤–∞–ª —Ö“Ø–º“Ø“Ø—Å–∏–π–≥ –≥—ç–≥—ç—ç—Ä“Ø“Ø–ª—ç—Ö, —É—Ä–∞–º ”©–≥”©—Ö —á–∞–¥–∞–º–∂—Ç–∞–π. –ì—ç–≤—á –¥–æ—Ç–æ–æ–¥ —ç—Ä–≥—ç–ª–∑—ç—ç, —ç–º–∑—ç–≥ –º—ç–¥—Ä—ç–º–∂–∏–π–≥ –∑–æ—Ö–∏—Ü—É—É–ª–∞—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π.",
  22: "–ú–∞—Å—Ç–µ—Ä —Ç–æ–æ 22 –Ω—å '–±–∞—Ä–∏–ª–≥–∞—á–∏–Ω' –±—É—é—É –∞–≥—É—É –∑“Ø–π–ª–∏–π–≥ –±“Ø—Ç—ç—ç—Ö —á–∞–¥–≤–∞—Ä—ã–≥ –∏–ª—ç—Ä—Ö–∏–π–ª–¥—ç–≥. –¢–∞ –ø—Ä–∞–∫—Ç–∏–∫, –ª–æ–≥–∏–∫ —Å—ç—Ç–≥—ç–ª–≥—ç—ç—Ç—ç–π –±”©–≥”©”©–¥ –º”©—Ä”©”©–¥–ª–∏–π–≥ –±–æ–¥–∏—Ç –±–æ–ª–≥–æ–Ω —Ö—É–≤–∏—Ä–≥–∞—Ö —á–∞–¥–≤–∞—Ä—Ç–∞–π. –ì—ç—Ö–¥—ç—ç —Ö—ç—Ç –∏—Ö –¥–∞—Ä–∞–º—Ç, —Ö—ç—Ç ”©–Ω–¥”©—Ä —Ö“Ø–ª—ç—ç–ª—Ç —Ç–∞–Ω—ã–≥ –¥–∞—Ä–∞—Ö —ç—Ä—Å–¥—ç–ª—Ç—ç–π.",
  33: "–ú–∞—Å—Ç–µ—Ä —Ç–æ–æ 33 –Ω—å –Ω”©—Ö—Ü”©–ª–≥“Ø–π —Ö–∞–π—Ä, —Ö–∞–ª–∞–º–∂, —Ö“Ø–º“Ø“Ø–Ω–ª—ç–≥ “Ø–π–ª—Å–∏–π–≥ –∏–ª—ç—Ä—Ö–∏–π–ª–¥—ç–≥. –¢–∞ –±—É—Å–¥—ã–Ω —Ç”©–ª”©”© ”©”©—Ä–∏–π–≥”©”© –∑–æ—Ä–∏—É–ª–∂ —á–∞–¥–∞—Ö —ç–Ω—ç—Ä—ç–Ω–≥“Ø–π —Å—ç—Ç–≥—ç–ª—Ç—ç–π. –°—É—Ä–≥–∞–Ω —Ö“Ø–º“Ø“Ø–∂“Ø“Ø–ª—ç–≥—á, —ç–¥–≥—ç—ç–≥—á, —Å“Ø–Ω—Å–ª—ç–≥ —É–¥–∏—Ä–¥–∞–≥—á –±–∞–π—Ö –º–∞–≥–∞–¥–ª–∞–ª—Ç–∞–π. –•—ç—Ç –∞—á–∞–∞–ª–∞–ª –∞–≤–∞–ª–≥“Ø–π ”©”©—Ä–∏–π–≥”©”© —Ö–∞–º–≥–∞–∞–ª–∞—Ö —Ç—ç–Ω—Ü–≤—ç—Ä–∏–π–≥ –æ–ª–æ–æ—Ä–æ–π."
};

function normalizeName(name) {
  return name.toLowerCase().replace(/[^–∞-—èa-z]/gi, '');
}

function getNameNumber(name) {
  let total = 0;
  name = normalizeName(name);
  for (let char of name) {
    if (charMap[char]) {
      total += charMap[char];
    }
  }
  return reduceToOneDigit(total);
}

function reduceToOneDigit(num) {
  while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
    num = num.toString().split('').reduce((a,b)=> a + Number(b), 0);
  }
  return num;
}

function calculate() {
  document.getElementById('output-section').style.display = 'block';

  const name = document.getElementById('name').value.trim();
  const birthdate = document.getElementById('birthdate').value;

  if (!name || !birthdate) {
    alert("–ë“Ø—Ö —Ç–∞–ª–±–∞—Ä—ã–≥ –±”©–≥–ª”©–Ω”© “Ø“Ø.");
    return;
  }

  const birthNums = birthdate.replace(/-/g, '').split('').map(Number);
  const lifePath = reduceToOneDigit(birthNums.reduce((a,b) => a + b, 0));
  const nameNumber = getNameNumber(name);

  localStorage.setItem("name", name);
  localStorage.setItem("birthdate", birthdate);

  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = `
    <p>üß¨ <strong>–ê–º—å–¥—Ä–∞–ª—ã–Ω –∑–∞–º—ã–Ω —Ç–æ–æ:</strong> ${lifePath} ‚Äî ${lifePaths[lifePath] || '–¢–∞–π–ª–±–∞—Ä –±–∞–π—Ö–≥“Ø–π.'}</p>
    <p>üîÆ <strong>–ù—ç—Ä–∏–π–Ω —Ö—É–≤—å —Ç–∞–≤–∏–ª–∞–Ω–≥–∏–π–Ω —Ç–æ–æ:</strong> ${nameNumber} ‚Äî ${destinyNumbers[nameNumber] || '–¢–∞–π–ª–±–∞—Ä –±–∞–π—Ö–≥“Ø–π.'}</p>
  `;

  // Facebook share —Ç–æ–≤—á–∏–π–≥ calculate –¥–∞—Ä–∞—Ö–∞–¥ –±“Ø—Ä—Ç–≥—ç—Ö (–¥–∞–≤—Ö–∞—Ä –±“Ø—Ä—Ç–≥—ç—Ö—ç—ç—Å —Å—ç—Ä–≥–∏–π–ª–Ω—ç)
  const shareBtn = document.getElementById("shareBtn");
  if (shareBtn && !shareBtn.hasAttribute('data-listener')) {
    shareBtn.onclick = function() {
      const url = encodeURIComponent(window.location.href);
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
    };
    shareBtn.setAttribute('data-listener', 'true');
  }
}
